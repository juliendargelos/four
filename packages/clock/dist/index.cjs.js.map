{"version":3,"file":"index.cjs.js","sources":["../src/clock.ts"],"sourcesContent":["type BaseClockType = 'getTime' | 'date' | 'performance'\n\nconst types: BaseClockType[] = ['getTime', 'date', 'performance']\n\nexport type ClockType = BaseClockType | (() => number)\n\nexport class Clock {\n  private _interval?: ((delta: number) => number) | number\n  private getInterval!: () => number\n  public time!: number\n  public delta!: number\n  public elapsed!: number\n  public now!: () => number\n\n  public static readonly getTime = () => new Date().getTime()\n  public static readonly date = Date.now || Clock.getTime\n  public static readonly performance = typeof performance === 'undefined'\n    ? Clock.date\n    : performance.now.bind(performance)\n\n  public static readonly now = Clock.date\n\n  public static throttle(\n    interval: (() => number) | number\n  ): (delta: number) => number {\n    return typeof interval === 'number'\n      ? (delta: number) => delta >= interval ? delta : 0\n      : (delta: number) => delta >= interval() ? delta : 0\n  }\n\n  public constructor({\n    type = 'date',\n    interval = undefined,\n  }: {\n    type?: ClockType\n    interval?: ((delta: number) => number) | number\n  } = {}) {\n    this.type = type\n    this.interval = interval\n    this.reset(true)\n  }\n\n  private getTimeInterval(): number {\n    return this.now() - this.time\n  }\n\n  public get interval(): ((delta: number) => number) | number | undefined {\n    return this._interval\n  }\n\n  public set interval(v: ((delta: number) => number) | number | undefined) {\n    this._interval = v\n\n    switch (typeof v) {\n      case 'number':\n        this.getInterval = () => v\n        break\n\n      case 'function':\n        this.getInterval = () => v(this.getTimeInterval())\n        break\n\n      default:\n        this.getInterval = this.getTimeInterval\n    }\n  }\n\n  public get type(): ClockType {\n    return types.find(type => Clock[type] === this.now) || this.now\n  }\n\n  public set type(type: ClockType) {\n    this.now = typeof type === 'function' ? type : Clock[type]\n  }\n\n  public reset(elapsed: boolean = false): this {\n    this.delta = 0\n    this.time = this.now()\n    if (elapsed) this.elapsed = 0\n    return this\n  }\n\n  public tick(delta: number = this.getInterval()): this {\n    this.delta = delta\n    this.time += delta\n    this.elapsed += delta\n    return this\n  }\n}\n"],"names":[],"mappings":";;;;AAEA,MAAM,KAAK,GAAoB,CAAC,SAAS,EAAE,MAAM,EAAE,aAAa,CAAC,CAAA;MAIpD,KAAK;IAwBhB,YAAmB,EACjB,IAAI,GAAG,MAAM,EACb,QAAQ,GAAG,SAAS,MAIlB,EAAE;QACJ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;QACxB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;KACjB;IAlBM,OAAO,QAAQ,CACpB,QAAiC;QAEjC,OAAO,OAAO,QAAQ,KAAK,QAAQ;cAC/B,CAAC,KAAa,KAAK,KAAK,IAAI,QAAQ,GAAG,KAAK,GAAG,CAAC;cAChD,CAAC,KAAa,KAAK,KAAK,IAAI,QAAQ,EAAE,GAAG,KAAK,GAAG,CAAC,CAAA;KACvD;IAcO,eAAe;QACrB,OAAO,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAA;KAC9B;IAED,IAAW,QAAQ;QACjB,OAAO,IAAI,CAAC,SAAS,CAAA;KACtB;IAED,IAAW,QAAQ,CAAC,CAAmD;QACrE,IAAI,CAAC,SAAS,GAAG,CAAC,CAAA;QAElB,QAAQ,OAAO,CAAC;YACd,KAAK,QAAQ;gBACX,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,CAAA;gBAC1B,MAAK;YAEP,KAAK,UAAU;gBACb,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAA;gBAClD,MAAK;YAEP;gBACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAA;SAC1C;KACF;IAED,IAAW,IAAI;QACb,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAA;KAChE;IAED,IAAW,IAAI,CAAC,IAAe;QAC7B,IAAI,CAAC,GAAG,GAAG,OAAO,IAAI,KAAK,UAAU,GAAG,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAA;KAC3D;IAEM,KAAK,CAAC,UAAmB,KAAK;QACnC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;QACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAA;QACtB,IAAI,OAAO;YAAE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAA;QAC7B,OAAO,IAAI,CAAA;KACZ;IAEM,IAAI,CAAC,QAAgB,IAAI,CAAC,WAAW,EAAE;QAC5C,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;QAClB,IAAI,CAAC,IAAI,IAAI,KAAK,CAAA;QAClB,IAAI,CAAC,OAAO,IAAI,KAAK,CAAA;QACrB,OAAO,IAAI,CAAA;KACZ;;AAzEsB,aAAO,GAAG,MAAM,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;AACpC,UAAI,GAAG,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,OAAO,CAAA;AAChC,iBAAW,GAAG,OAAO,WAAW,KAAK,WAAW;MACnE,KAAK,CAAC,IAAI;MACV,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;AAEd,SAAG,GAAG,KAAK,CAAC,IAAI;;;;"}